{"version":3,"sources":["src/app/members/inc/outst-more/outst-more.page.html","src/app/members/inc/outst-more/outst-more-routing.module.ts","src/app/members/inc/outst-more/outst-more.module.ts","src/app/members/inc/outst-more/outst-more.page.scss","src/app/members/inc/outst-more/outst-more.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header color=\\\"primary\\\">\\n    <ion-toolbar class=\\\"toolbar-background-md\\\">\\n        <ion-title>\\n            <ion-chip outline class=\\\"ion-margin-vertical chip\\\">\\n            <ion-icon class=\\\"chip\\\" name=\\\"clipboard\\\"></ion-icon>OUT/EXC - PAYMENTS \\n            <ion-spinner style=\\\"margin-left: 16px;\\\" name=\\\"crescent\\\" color=\\\"light\\\" [hidden]=\\\"!submitting\\\"></ion-spinner>\\n            </ion-chip>\\n        </ion-title>\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-button class=\\\"ion-text-capitalize\\\" (click)=\\\"dismiss()\\\">Close</ion-button>\\n        </ion-buttons>\\n    </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>    \\n    <ion-card>  \\n    <ion-list style=\\\"margin-bottom: 40px;\\\">\\n        <ion-card-header>\\n            <ion-card-title> Base Invoice #: {{outst.odr_id}}</ion-card-title>\\n            <ion-grid>\\n                    <ion-row>\\n                        <ion-col>\\n                            <ion-card-subtitle> Bill Amount: </ion-card-subtitle>\\n                        </ion-col>\\n                        <ion-col>Rs.{{outst.odr_amount | number : '1.2-2'}}</ion-col>\\n                    </ion-row>\\n                    <ion-row>\\n                        <ion-col>\\n                            <ion-card-subtitle> Out/Exc Amount: </ion-card-subtitle>\\n                        </ion-col>\\n                        <ion-col>\\n                            <ion-card-title> Rs.{{outst.out | number : '1.2-2'}}</ion-card-title>\\n                        </ion-col>\\n                    </ion-row>\\n                    <ion-row>\\n                        <ion-col>\\n                            <ion-card-subtitle> Current Payment: </ion-card-subtitle>\\n                        </ion-col>\\n                        <ion-col>\\n                            Rs.{{currPay | number : '1.2-2'}}\\n                        </ion-col>\\n                    </ion-row>\\n                    <ion-row>\\n                        <ion-col>\\n                            <ion-card-subtitle> Effective Payment: </ion-card-subtitle>\\n                        </ion-col>\\n                        <ion-col>\\n                            Rs.{{effectivePaid | number : '1.2-2'}}\\n                        </ion-col>\\n                    </ion-row>\\n            </ion-grid>\\n            <ion-item-divider></ion-item-divider>\\n            <ion-item>\\n                <ion-grid >\\n                    <ion-row >\\n                        <ion-col size=\\\"6\\\" style=\\\"padding-top: 15px;\\\">\\n                            <b *ngIf=\\\"isOutst\\\" class=\\\"ion-float-left\\\"> Make Payment: </b>\\n                            <b *ngIf=\\\"!isOutst\\\" class=\\\"ion-float-left\\\"> Bring Forward: </b>\\n                        </ion-col>\\n                        <ion-col size=\\\"2\\\">\\n                            <p style=\\\"margin-top: 10px\\\">Rs.</p>\\n                        </ion-col>\\n                        <ion-col size=\\\"4\\\">\\n                            <ion-input [readonly]=\\\"!isOutst\\\" type=\\\"number\\\" (keyup)=\\\"chkPayBalence($event)\\\" \\n                            placeholder=\\\"Enter Here..\\\" [(ngModel)]=\\\"outstPayment.amount\\\"></ion-input>\\n                        </ion-col>\\n                    </ion-row>\\n                \\n                    <ion-row>\\n                        <ion-col size=\\\"12\\\">    \\n                            <ion-button style=\\\"width: 100%;\\\" class=\\\"ion-float-right\\\" (click)=\\\"payForOdr()\\\"><ion-icon name=\\\"arrow-round-back\\\"></ion-icon>Confirm & Go Back</ion-button>\\n                        </ion-col>\\n                    </ion-row>\\n                </ion-grid>\\n            </ion-item>\\n            <ion-card-subtitle *ngIf=\\\"isPayAvali\\\"> {{ payments.length }} payment record(s) avilable</ion-card-subtitle>\\n        </ion-card-header>\\n            \\n            <ion-card-subtitle *ngIf=\\\"!isPayAvali\\\" class=\\\"ion-margin-start\\\">No payment records available.. </ion-card-subtitle>\\n            <ion-item background=\\\"dark\\\" *ngFor=\\\"let payment of payments\\\" class=\\\"list-small-amrgin\\\">\\t\\t\\t\\n                \\n                <!-- <ion-item> -->\\n                <ion-label text-wrap class=\\\"ion-no-margin\\\">\\n                    <ion-grid>\\n                        <ion-row>\\n                            <ion-col class=\\\"ion-float-left\\\">\\n                                <ion-text color=\\\"light\\\">\\n                                    <ion-badge mode=\\\"ios\\\" class=\\\"list-header\\\" color=\\\"primary\\\">\\n                                        <ion-icon class=\\\"chip\\\" name=\\\"calendar\\\"></ion-icon> {{ payment.paid_date }}\\n                                    </ion-badge>\\n                                </ion-text>\\n                            </ion-col>\\n                            <ion-col  class=\\\"ion-float-right\\\">\\n                                <ion-text color=\\\"light\\\" class=\\\"ion-text-right\\\">\\n                                    <p class=\\\"list-sub-header\\\">\\n                                        Rs.{{ payment.paid_amount }}\\n                                    </p>\\n                                </ion-text>\\n                            </ion-col>\\n                        </ion-row>\\n                    </ion-grid>\\n                </ion-label>\\n                <!-- </ion-item> -->\\n            </ion-item>\\n        </ion-list>\\n    </ion-card>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OutstMorePage } from './outst-more.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OutstMorePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OutstMorePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OutstMorePageRoutingModule } from './outst-more-routing.module';\n\nimport { OutstMorePage } from './outst-more.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    OutstMorePageRoutingModule\n  ],\n  declarations: [OutstMorePage]\n})\nexport class OutstMorePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21lbWJlcnMvaW5jL291dHN0LW1vcmUvb3V0c3QtbW9yZS5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { NavParams } from '@ionic/angular';\nimport { AuthenticationService } from '../../../services/authentication.service';\nimport { StorageService, OutstPayment } from '../../../services/storage.service';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n    selector: 'app-outst-more',\n    templateUrl: './outst-more.page.html',\n    styleUrls: ['./outst-more.page.scss'],\n})\n\nexport class OutstMorePage implements OnInit {\n\n    private outst: any;\n    private payments: any[] = [];\n    private currPay: number = 0;\n    private effectivePaid: number = 0;\n    private isPayAvali: boolean = false;\n    private isOutst: boolean;\n    private outstPayment: OutstPayment = <OutstPayment>{};\n    private submitting:boolean = false;\n\n    constructor(\n        public modalController: ModalController,\n        private navParams: NavParams,\n        private authService: AuthenticationService,\n        private storage: StorageService,\n        private http: HttpClient\n    ) { \n        this.outst = this.navParams.get('outst');\n        this.currPay = this.navParams.get('currPay');\n        this.effectivePaid = this.navParams.get('effectivePaid');\n        this.isOutst = this.outst.isOutst;\n        this.outstPayment.odrId = this.outst.odr_id;\n        this.outstPayment.isOutstPay = this.outst.isOutst;\n    }\n\n    ngOnInit() { \n        this.getPayedHistoryByOrder();\n        this.setMaxOutstPayment();\n\n        this.currPay = this.currPay ? this.currPay : 0;\n        this.effectivePaid = this.effectivePaid ? this.effectivePaid : 0;\n    }\n\n    payForOdr(){\n        if ((!this.outstPayment.amount || this.outstPayment.amount == null) || \n            (this.outstPayment.amount <= 0 && this.outstPayment.isOutstPay === true)) {\n            this.authService.showToast(\"<b>Please enter a valid payment amount.. <ion-icon name='information-circle-outline'></ion-icon></b>\");\n        }else{\n            this.modalController.dismiss({\n                payment: this.outstPayment\n            });\n        }\n    }\n\n    getPayedHistoryByOrder(){\n        if (!navigator.onLine)\n            this.authService.showToast(\"<b>No internet access..<ion-icon name='information-circle-outline'></ion-icon></b><br>Cannot connect to the server..\");\n        \n        \n        let url = this.storage.svr_url+\"OrderCtrl/getPayedHistoryByOrder/\"+this.outst.odr_id;\n        this.submitting = true;\n        \n        this.http.get(url).subscribe((payments: any)=>{\n            \n            console.log(payments);\n\n            if (payments){\n                this.payments = payments;\n                this.isPayAvali = this.payments.length > 0 ? true: false;\n            }\n        });\n        this.submitting = false;\n    }\n\n\n    chkPayBalence(ev){\n        console.log(this.effectivePaid +\"<\"+ ev.target.value)\n        if (this.effectivePaid*1 < ev.target.value*1) {\n            this.authService.showToast(\"<b>The effective payment amount is insufficient.. <ion-icon name='information-circle-outline'></ion-icon></b>\");\n            ev.target.value = null;\n            this.setMaxOutstPayment();\n        }\n        console.log(ev.target.value +\" > \"+this.outst.out)\n        if (ev.target.value*1 > this.outst.out*1 ) {\n            this.authService.showToast(\"<b>The value you entered is larger than the outstanding amount.. <ion-icon name='information-circle-outline'></ion-icon></b>\");\n            ev.target.value = null;\n            this.setMaxOutstPayment();\n        }\n    }\n\n    setMaxOutstPayment(){\n        if (this.isOutst) {\n            if (this.outst.out <= this.effectivePaid) {\n                this.outstPayment.amount = this.outst.out;\n            } else {\n                this.outstPayment.amount = this.effectivePaid;\n            }\n        } else{\n            this.outstPayment.amount = this.outst.out;\n        }\n    }\n\n    dismiss() {\n        this.modalController.dismiss({\n            'dismissed': true,\n        });\n    }\n}\n"],"sourceRoot":"webpack:///","file":"default~dashboard-dashboard-module~inc-add-order-add-order-module~inc-outst-more-outst-more-module~i~e4f143a4-es5.js"}