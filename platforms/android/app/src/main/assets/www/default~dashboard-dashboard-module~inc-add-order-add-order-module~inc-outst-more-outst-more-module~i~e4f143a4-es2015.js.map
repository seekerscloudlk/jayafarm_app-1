{"version":3,"sources":["./src/app/members/inc/outst-more/outst-more.page.html","./src/app/members/inc/outst-more/outst-more-routing.module.ts","./src/app/members/inc/outst-more/outst-more.module.ts","./src/app/members/inc/outst-more/outst-more.page.scss","./src/app/members/inc/outst-more/outst-more.page.ts"],"names":[],"mappings":"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","file":"default~dashboard-dashboard-module~inc-add-order-add-order-module~inc-outst-more-outst-more-module~i~e4f143a4-es2015.js","sourcesContent":["export default \"<ion-header color=\\\"primary\\\">\\n    <ion-toolbar class=\\\"toolbar-background-md\\\">\\n        <ion-title>\\n            <ion-chip outline class=\\\"ion-margin-vertical chip\\\">\\n            <ion-icon class=\\\"chip\\\" name=\\\"clipboard\\\"></ion-icon>OUT/EXC - PAYMENTS \\n            <ion-spinner style=\\\"margin-left: 16px;\\\" name=\\\"crescent\\\" color=\\\"light\\\" [hidden]=\\\"!submitting\\\"></ion-spinner>\\n            </ion-chip>\\n        </ion-title>\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-button class=\\\"ion-text-capitalize\\\" (click)=\\\"dismiss()\\\">Close</ion-button>\\n        </ion-buttons>\\n    </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>    \\n    <ion-card>  \\n    <ion-list style=\\\"margin-bottom: 40px;\\\">\\n        <ion-card-header>\\n            <ion-card-title> Base Invoice #: {{outst.odr_id}}</ion-card-title>\\n            <ion-grid>\\n                    <ion-row>\\n                        <ion-col>\\n                            <ion-card-subtitle> Bill Amount: </ion-card-subtitle>\\n                        </ion-col>\\n                        <ion-col>Rs.{{outst.odr_amount | number : '1.2-2'}}</ion-col>\\n                    </ion-row>\\n                    <ion-row>\\n                        <ion-col>\\n                            <ion-card-subtitle> Out/Exc Amount: </ion-card-subtitle>\\n                        </ion-col>\\n                        <ion-col>\\n                            <ion-card-title> Rs.{{outst.out | number : '1.2-2'}}</ion-card-title>\\n                        </ion-col>\\n                    </ion-row>\\n                    <ion-row>\\n                        <ion-col>\\n                            <ion-card-subtitle> Current Payment: </ion-card-subtitle>\\n                        </ion-col>\\n                        <ion-col>\\n                            Rs.{{currPay | number : '1.2-2'}}\\n                        </ion-col>\\n                    </ion-row>\\n                    <ion-row>\\n                        <ion-col>\\n                            <ion-card-subtitle> Effective Payment: </ion-card-subtitle>\\n                        </ion-col>\\n                        <ion-col>\\n                            Rs.{{effectivePaid | number : '1.2-2'}}\\n                        </ion-col>\\n                    </ion-row>\\n            </ion-grid>\\n            <ion-item-divider></ion-item-divider>\\n            <ion-item>\\n                <ion-grid >\\n                    <ion-row >\\n                        <ion-col size=\\\"6\\\" style=\\\"padding-top: 15px;\\\">\\n                            <b *ngIf=\\\"isOutst\\\" class=\\\"ion-float-left\\\"> Make Payment: </b>\\n                            <b *ngIf=\\\"!isOutst\\\" class=\\\"ion-float-left\\\"> Bring Forward: </b>\\n                        </ion-col>\\n                        <ion-col size=\\\"2\\\">\\n                            <p style=\\\"margin-top: 10px\\\">Rs.</p>\\n                        </ion-col>\\n                        <ion-col size=\\\"4\\\">\\n                            <ion-input [readonly]=\\\"!isOutst\\\" type=\\\"number\\\" (keyup)=\\\"chkPayBalence($event)\\\" \\n                            placeholder=\\\"Enter Here..\\\" [(ngModel)]=\\\"outstPayment.amount\\\"></ion-input>\\n                        </ion-col>\\n                    </ion-row>\\n                \\n                    <ion-row>\\n                        <ion-col size=\\\"12\\\">    \\n                            <ion-button style=\\\"width: 100%;\\\" class=\\\"ion-float-right\\\" (click)=\\\"payForOdr()\\\"><ion-icon name=\\\"arrow-round-back\\\"></ion-icon>Confirm & Go Back</ion-button>\\n                        </ion-col>\\n                    </ion-row>\\n                </ion-grid>\\n            </ion-item>\\n            <ion-card-subtitle *ngIf=\\\"isPayAvali\\\"> {{ payments.length }} payment record(s) avilable</ion-card-subtitle>\\n        </ion-card-header>\\n            \\n            <ion-card-subtitle *ngIf=\\\"!isPayAvali\\\" class=\\\"ion-margin-start\\\">No payment records available.. </ion-card-subtitle>\\n            <ion-item background=\\\"dark\\\" *ngFor=\\\"let payment of payments\\\" class=\\\"list-small-amrgin\\\">\\t\\t\\t\\n                \\n                <!-- <ion-item> -->\\n                <ion-label text-wrap class=\\\"ion-no-margin\\\">\\n                    <ion-grid>\\n                        <ion-row>\\n                            <ion-col class=\\\"ion-float-left\\\">\\n                                <ion-text color=\\\"light\\\">\\n                                    <ion-badge mode=\\\"ios\\\" class=\\\"list-header\\\" color=\\\"primary\\\">\\n                                        <ion-icon class=\\\"chip\\\" name=\\\"calendar\\\"></ion-icon> {{ payment.paid_date }}\\n                                    </ion-badge>\\n                                </ion-text>\\n                            </ion-col>\\n                            <ion-col  class=\\\"ion-float-right\\\">\\n                                <ion-text color=\\\"light\\\" class=\\\"ion-text-right\\\">\\n                                    <p class=\\\"list-sub-header\\\">\\n                                        Rs.{{ payment.paid_amount }}\\n                                    </p>\\n                                </ion-text>\\n                            </ion-col>\\n                        </ion-row>\\n                    </ion-grid>\\n                </ion-label>\\n                <!-- </ion-item> -->\\n            </ion-item>\\n        </ion-list>\\n    </ion-card>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OutstMorePage } from './outst-more.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OutstMorePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OutstMorePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OutstMorePageRoutingModule } from './outst-more-routing.module';\n\nimport { OutstMorePage } from './outst-more.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    OutstMorePageRoutingModule\n  ],\n  declarations: [OutstMorePage]\n})\nexport class OutstMorePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21lbWJlcnMvaW5jL291dHN0LW1vcmUvb3V0c3QtbW9yZS5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { NavParams } from '@ionic/angular';\nimport { AuthenticationService } from '../../../services/authentication.service';\nimport { StorageService, OutstPayment } from '../../../services/storage.service';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n    selector: 'app-outst-more',\n    templateUrl: './outst-more.page.html',\n    styleUrls: ['./outst-more.page.scss'],\n})\n\nexport class OutstMorePage implements OnInit {\n\n    private outst: any;\n    private payments: any[] = [];\n    private currPay: number = 0;\n    private effectivePaid: number = 0;\n    private isPayAvali: boolean = false;\n    private isOutst: boolean;\n    private outstPayment: OutstPayment = <OutstPayment>{};\n    private submitting:boolean = false;\n\n    constructor(\n        public modalController: ModalController,\n        private navParams: NavParams,\n        private authService: AuthenticationService,\n        private storage: StorageService,\n        private http: HttpClient\n    ) { \n        this.outst = this.navParams.get('outst');\n        this.currPay = this.navParams.get('currPay');\n        this.effectivePaid = this.navParams.get('effectivePaid');\n        this.isOutst = this.outst.isOutst;\n        this.outstPayment.odrId = this.outst.odr_id;\n        this.outstPayment.isOutstPay = this.outst.isOutst;\n    }\n\n    ngOnInit() { \n        this.getPayedHistoryByOrder();\n        this.setMaxOutstPayment();\n\n        this.currPay = this.currPay ? this.currPay : 0;\n        this.effectivePaid = this.effectivePaid ? this.effectivePaid : 0;\n    }\n\n    payForOdr(){\n        if ((!this.outstPayment.amount || this.outstPayment.amount == null) || \n            (this.outstPayment.amount <= 0 && this.outstPayment.isOutstPay === true)) {\n            this.authService.showToast(\"<b>Please enter a valid payment amount.. <ion-icon name='information-circle-outline'></ion-icon></b>\");\n        }else{\n            this.modalController.dismiss({\n                payment: this.outstPayment\n            });\n        }\n    }\n\n    getPayedHistoryByOrder(){\n        if (!navigator.onLine)\n            this.authService.showToast(\"<b>No internet access..<ion-icon name='information-circle-outline'></ion-icon></b><br>Cannot connect to the server..\");\n        \n        \n        let url = this.storage.svr_url+\"OrderCtrl/getPayedHistoryByOrder/\"+this.outst.odr_id;\n        this.submitting = true;\n        \n        this.http.get(url).subscribe((payments: any)=>{\n            \n            console.log(payments);\n\n            if (payments){\n                this.payments = payments;\n                this.isPayAvali = this.payments.length > 0 ? true: false;\n            }\n        });\n        this.submitting = false;\n    }\n\n\n    chkPayBalence(ev){\n        console.log(this.effectivePaid +\"<\"+ ev.target.value)\n        if (this.effectivePaid*1 < ev.target.value*1) {\n            this.authService.showToast(\"<b>The effective payment amount is insufficient.. <ion-icon name='information-circle-outline'></ion-icon></b>\");\n            ev.target.value = null;\n            this.setMaxOutstPayment();\n        }\n        console.log(ev.target.value +\" > \"+this.outst.out)\n        if (ev.target.value*1 > this.outst.out*1 ) {\n            this.authService.showToast(\"<b>The value you entered is larger than the outstanding amount.. <ion-icon name='information-circle-outline'></ion-icon></b>\");\n            ev.target.value = null;\n            this.setMaxOutstPayment();\n        }\n    }\n\n    setMaxOutstPayment(){\n        if (this.isOutst) {\n            if (this.outst.out <= this.effectivePaid) {\n                this.outstPayment.amount = this.outst.out;\n            } else {\n                this.outstPayment.amount = this.effectivePaid;\n            }\n        } else{\n            this.outstPayment.amount = this.outst.out;\n        }\n    }\n\n    dismiss() {\n        this.modalController.dismiss({\n            'dismissed': true,\n        });\n    }\n}\n"],"sourceRoot":"webpack:///"}