{"version":3,"sources":["src/app/members/inc/outst-settle/outst-settle.page.html","src/app/members/inc/outst-settle/outst-settle-routing.module.ts","src/app/members/inc/outst-settle/outst-settle.module.ts","src/app/members/inc/outst-settle/outst-settle.page.scss","src/app/members/inc/outst-settle/outst-settle.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header color=\\\"primary\\\">\\n    <ion-toolbar class=\\\"toolbar-background-md\\\">\\n        <ion-title>\\n            <ion-chip outline class=\\\"ion-margin-vertical chip\\\">\\n                <ion-icon class=\\\"chip\\\" name=\\\"clipboard\\\"></ion-icon>OUTSTANDING & EXCESS\\n                <ion-spinner style=\\\"margin-left: 16px;\\\" name=\\\"crescent\\\" color=\\\"light\\\" [hidden]=\\\"!submitting\\\"></ion-spinner>\\n            </ion-chip>\\n        </ion-title>\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-button class=\\\"ion-text-capitalize\\\" (click)=\\\"dismiss()\\\">Close</ion-button>\\n        </ion-buttons>\\n    </ion-toolbar>\\n</ion-header>\\n<ion-content>      \\n    <ion-card-header>\\n        <ion-card-subtitle *ngIf=\\\"isOutstAvail\\\"> {{ outsts.length }} record(s) avilable</ion-card-subtitle>\\n        <ion-card-subtitle *ngIf=\\\"!isOutstAvail\\\">No Outstanding or Excess found.. </ion-card-subtitle>\\n        <ion-grid *ngIf=\\\"isOutstAvail\\\">\\n                <ion-row>\\n                    <ion-col>\\n                        <ion-card-subtitle> Total outstanding: </ion-card-subtitle>\\n                    </ion-col>\\n                    <ion-col>\\n                        <ion-card-title> Rs.{{ttlOutst | number : '1.2-2'}}</ion-card-title>\\n                    </ion-col>\\n                </ion-row>\\n                <ion-row>\\n                    <ion-col>\\n                        <ion-card-subtitle> Current Payment: </ion-card-subtitle>\\n                    </ion-col>\\n                    <ion-col>\\n                        Rs.{{totalPaid | number : '1.2-2'}}\\n                    </ion-col>\\n                </ion-row>\\n                <ion-row>\\n                    <ion-col>\\n                        <ion-card-subtitle> Effective Balance: </ion-card-subtitle>\\n                    </ion-col>\\n                    <ion-col>\\n                        Rs.{{effectivePaid | number : '1.2-2'}}\\n                    </ion-col>\\n                </ion-row>\\n                \\n        </ion-grid>\\n    </ion-card-header>\\n    <ion-card>\\n        <ion-card-header>\\n            <ion-card-subtitle> Outstanding/Excess settlements</ion-card-subtitle>\\n        </ion-card-header>\\n        <ion-list style=\\\"margin-bottom: 40px;\\\">\\n            <ion-item-sliding *ngFor=\\\"let pay of oustPays; let idx = index\\\">\\n                <ion-item class=\\\"list-small-amrgin\\\">\\t\\t\\t\\n                    <ion-label text-wrap class=\\\"ion-no-margin\\\">\\n                        <ion-grid>\\n                            <ion-row>\\n                                <ion-col size=\\\"2\\\" class=\\\"ion-float-left\\\">\\n                                    <ion-text color=\\\"light\\\">\\n                                        <ion-badge mode=\\\"ios\\\" class=\\\"list-header\\\" color=\\\"primary\\\">\\n                                            <ion-icon class=\\\"chip\\\" name=\\\"clipboard\\\"></ion-icon> {{ pay.odrId }}\\n                                        </ion-badge>\\n                                    </ion-text>\\n                                </ion-col>\\n                                <ion-col size=\\\"6\\\" class=\\\"ion-float-left\\\">\\n                                    <ion-text color=\\\"light\\\">\\n                                        <p class=\\\"list-sub-header ion-text-right\\\">\\n                                            Rs.{{ pay.amount }}\\n                                        </p>\\n                                    </ion-text>\\n                                </ion-col>\\n                                <ion-col size=\\\"2\\\" class=\\\"ion-float-right\\\">\\n                                    <ion-badge class=\\\"ion-float-right\\\" mode=\\\"ios\\\" *ngIf=\\\"pay.isOutstPay\\\" color=\\\"danger\\\">\\n                                        <ion-icon name=\\\"add\\\"></ion-icon>\\n                                    </ion-badge>\\n                                    <ion-badge class=\\\"ion-float-right\\\" mode=\\\"ios\\\" *ngIf=\\\"!pay.isOutstPay\\\" color=\\\"tertiary\\\">\\n                                        <ion-icon name=\\\"remove\\\"></ion-icon>\\n                                    </ion-badge>\\n                                </ion-col>\\n                            </ion-row>\\n                        </ion-grid>\\n                    </ion-label>\\n                </ion-item>\\n                <ion-item-options side=\\\"end\\\">\\n                    <ion-item-option color=\\\"danger\\\" class=\\\"ion-text-capitalize\\\" (click)=\\\"removeItem(idx, pay.amount)\\\">\\n                            <ion-icon name=\\\"close\\\"></ion-icon>Remove\\n                    </ion-item-option>\\n                </ion-item-options>\\n            </ion-item-sliding>\\n        </ion-list>\\n        <ion-grid>\\n            <ion-row>\\n                <ion-col size=\\\"12\\\">\\n                    <ion-button style=\\\"width: 100%;\\\" class=\\\"ion-float-right\\\" (click)=\\\"confirmSettles()\\\">\\n                        <ion-icon name=\\\"arrow-round-back\\\"></ion-icon>Confirm & Go Back\\n                    </ion-button>\\n                </ion-col>\\n            </ion-row>\\n        </ion-grid>\\n    </ion-card>\\n\\n    <ion-list style=\\\"margin-bottom: 40px;\\\">\\n        <ion-item background=\\\"dark\\\" *ngFor=\\\"let outst of outsts\\\" class=\\\"list-small-amrgin\\\" (click)=\\\"openOutstMore(outst)\\\">\\t\\t\\t\\n            <ion-label text-wrap class=\\\"ion-no-margin\\\">\\n                <ion-grid>\\n                    <ion-row>\\n                        <ion-col size=\\\"2\\\" class=\\\"ion-float-left\\\">\\n                            <ion-text color=\\\"light\\\">\\n                                <ion-badge mode=\\\"ios\\\" class=\\\"list-header\\\" color=\\\"primary\\\">\\n                                    <ion-icon class=\\\"chip\\\" name=\\\"clipboard\\\"></ion-icon> {{ outst.odr_id }}\\n                                </ion-badge>\\n                            </ion-text>\\n                        </ion-col>\\n                        <ion-col size=\\\"6\\\" class=\\\"ion-float-left\\\">\\n                            <ion-text color=\\\"light\\\">\\n                                <p class=\\\"list-sub-header\\\">\\n                                    <ion-icon name=\\\"calendar\\\"></ion-icon>\\n                                    {{ outst.odr_datetime }}\\n                                </p>\\n                            </ion-text>\\n                        </ion-col>\\n                        <ion-col size=\\\"2\\\" class=\\\"ion-float-right\\\">\\n                            <ion-badge class=\\\"ion-float-right\\\" mode=\\\"ios\\\" *ngIf=\\\"outst.isOutst\\\" color=\\\"danger\\\">\\n                                <ion-icon name=\\\"wallet\\\"></ion-icon>\\n                            </ion-badge>\\n                            <ion-badge class=\\\"ion-float-right\\\" mode=\\\"ios\\\" *ngIf=\\\"!outst.isOutst\\\" color=\\\"tertiary\\\">\\n                                <ion-icon name=\\\"wallet\\\"></ion-icon>\\n                            </ion-badge>\\n                        </ion-col>\\n                    </ion-row>\\n                    <ion-row>\\n                        <ion-col class=\\\"ion-float-left\\\"><b>Total</b></ion-col>\\n                        <ion-col class=\\\"ion-float-left\\\"><b>Paid Amount</b></ion-col>\\n                        <ion-col class=\\\"ion-float-left\\\"><b>Out/Exc</b></ion-col>\\n                    </ion-row>\\n                    <ion-row>\\n                        <ion-col class=\\\"ion-float-left\\\">{{ outst.odr_amount }}</ion-col>\\n                        <ion-col class=\\\"ion-float-left\\\">{{ outst.odr_paid_amount }}</ion-col>\\n                        <ion-col class=\\\"ion-float-left\\\">{{ outst.out }}</ion-col>\\n                    </ion-row>\\n                </ion-grid>\\n            </ion-label>\\n        </ion-item>\\n    </ion-list>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OutstSettlePage } from './outst-settle.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OutstSettlePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OutstSettlePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OutstSettlePageRoutingModule } from './outst-settle-routing.module';\n\nimport { OutstSettlePage } from './outst-settle.page';\nimport { OutstMorePageModule } from '../outst-more/outst-more.module'\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    OutstSettlePageRoutingModule,\n    OutstMorePageModule\n  ],\n  declarations: [OutstSettlePage]\n})\nexport class OutstSettlePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21lbWJlcnMvaW5jL291dHN0LXNldHRsZS9vdXRzdC1zZXR0bGUucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { NavParams } from '@ionic/angular';\nimport { ModalController } from '@ionic/angular';\nimport { OutstMorePage } from '../outst-more/outst-more.page';\nimport { OutstPayment } from '../../../services/storage.service';\nimport { AuthenticationService } from '../../../services/authentication.service';\n\n@Component({\n    selector: 'app-outst-settle',\n    templateUrl: './outst-settle.page.html',\n    styleUrls: ['./outst-settle.page.scss'],\n})\n\nexport class OutstSettlePage implements OnInit {\n    private outsts: any;\n    private totalPaid: number;\n    private isOutstAvail: boolean = false;\n    private ttlOutst: number = 0;\n    private oustPays: OutstPayment[] = [];\n    private effectivePaid: number = 0;\n    constructor(\n        public modalController: ModalController,\n        private navParams: NavParams,\n        private authService: AuthenticationService\n    ) { \n        this.outsts = navParams.get('outsts');\n        this.totalPaid = Number(navParams.get('totalPaid'));\n        this.ttlOutst = navParams.get('ttlOutst');\n        console.log(this.outsts)\n    }\n\n    ngOnInit() {\n        this.isOutstAvail = this.outsts.length > 0 ? true: false;\n        this.effectivePaid = this.totalPaid;\n        this.getTotalOutst();\n    }\n\n    removeItem(idx: number, amount: number){\n        this.oustPays.splice(idx, 1);\n        this.calcEffectivePaid(amount, true);\n    }\n\n    confirmSettles(){\n        if (this.oustPays.length < 1) {\n            this.authService.showToast(\"<b>Please add atleast one settlemnt record and proceed.. <ion-icon name='information-circle-outline'></ion-icon></b>\");\n        }else{\n            this.modalController.dismiss({\n                settlements: this.oustPays\n            });\n        }\n    }\n\n\n    getTotalOutst() {\n        let ttlOutst: number = 0;\n        this.outsts.forEach((outst: any, index) => {\n            console.log(index)\n            this.outsts[index].isOutst = Number(this.outsts[index].isOutst) == 1 ? true: false;  \n            ttlOutst += Number(outst.out);\n        });\n    }\n\n\n    async openOutstMore(out: any){\n        const modal = await this.modalController.create({\n            component: OutstMorePage,\n            componentProps: {\n                outst: out,\n                currPay: this.totalPaid,\n                effectivePaid: this.effectivePaid\n            }\n        });\n        modal.present();\n        let ret = await modal.onWillDismiss();\n        let pay: OutstPayment = <OutstPayment>ret.data.payment;\n        if (pay) {\n            if(this.oustPays.some(function(el){ return el.odrId === pay.odrId})){\n                this.authService.showToast(\"<b>The record already exists in the settlments list.. <ion-icon name='information-circle-outline'></ion-icon>\");\n            }else{\n                console.log(pay);\n                this.oustPays.push(pay);\n                this.calcEffectivePaid(pay.amount, false);\n            }\n        } \n    }\n\n    calcEffectivePaid(pay: number, isAdd: boolean){\n\n        if(isAdd) {\n            this.effectivePaid = this.effectivePaid*1 + pay*1;\n        }else {\n            this.effectivePaid = this.effectivePaid*1 - pay*1;\n        }\n    }\n    \n    dismiss() {\n        this.modalController.dismiss({\n            'dismissed': true,\n        });\n    }\n\n}\n"],"sourceRoot":"webpack:///","file":"default~dashboard-dashboard-module~inc-add-order-add-order-module~inc-outst-settle-outst-settle-module-es5.js"}