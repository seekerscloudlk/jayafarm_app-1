{"version":3,"sources":["./src/app/members/inc/outst-settle/outst-settle.page.html","./src/app/members/inc/outst-settle/outst-settle-routing.module.ts","./src/app/members/inc/outst-settle/outst-settle.module.ts","./src/app/members/inc/outst-settle/outst-settle.page.scss","./src/app/members/inc/outst-settle/outst-settle.page.ts"],"names":[],"mappings":"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","file":"default~dashboard-dashboard-module~inc-add-order-add-order-module~inc-outst-settle-outst-settle-module-es2015.js","sourcesContent":["export default \"<ion-header color=\\\"primary\\\">\\n    <ion-toolbar class=\\\"toolbar-background-md\\\">\\n        <ion-title>\\n            <ion-chip outline class=\\\"ion-margin-vertical chip\\\">\\n                <ion-icon class=\\\"chip\\\" name=\\\"clipboard\\\"></ion-icon>OUTSTANDING & EXCESS\\n                <ion-spinner style=\\\"margin-left: 16px;\\\" name=\\\"crescent\\\" color=\\\"light\\\" [hidden]=\\\"!submitting\\\"></ion-spinner>\\n            </ion-chip>\\n        </ion-title>\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-button class=\\\"ion-text-capitalize\\\" (click)=\\\"dismiss()\\\">Close</ion-button>\\n        </ion-buttons>\\n    </ion-toolbar>\\n</ion-header>\\n<ion-content>      \\n    <ion-card-header>\\n        <ion-card-subtitle *ngIf=\\\"isOutstAvail\\\"> {{ outsts.length }} record(s) avilable</ion-card-subtitle>\\n        <ion-card-subtitle *ngIf=\\\"!isOutstAvail\\\">No Outstanding or Excess found.. </ion-card-subtitle>\\n        <ion-grid *ngIf=\\\"isOutstAvail\\\">\\n                <ion-row>\\n                    <ion-col>\\n                        <ion-card-subtitle> Total outstanding: </ion-card-subtitle>\\n                    </ion-col>\\n                    <ion-col>\\n                        <ion-card-title> Rs.{{ttlOutst | number : '1.2-2'}}</ion-card-title>\\n                    </ion-col>\\n                </ion-row>\\n                <ion-row>\\n                    <ion-col>\\n                        <ion-card-subtitle> Current Payment: </ion-card-subtitle>\\n                    </ion-col>\\n                    <ion-col>\\n                        Rs.{{totalPaid | number : '1.2-2'}}\\n                    </ion-col>\\n                </ion-row>\\n                <ion-row>\\n                    <ion-col>\\n                        <ion-card-subtitle> Effective Balance: </ion-card-subtitle>\\n                    </ion-col>\\n                    <ion-col>\\n                        Rs.{{effectivePaid | number : '1.2-2'}}\\n                    </ion-col>\\n                </ion-row>\\n                \\n        </ion-grid>\\n    </ion-card-header>\\n    <ion-card>\\n        <ion-card-header>\\n            <ion-card-subtitle> Outstanding/Excess settlements</ion-card-subtitle>\\n        </ion-card-header>\\n        <ion-list style=\\\"margin-bottom: 40px;\\\">\\n            <ion-item-sliding *ngFor=\\\"let pay of oustPays; let idx = index\\\">\\n                <ion-item class=\\\"list-small-amrgin\\\">\\t\\t\\t\\n                    <ion-label text-wrap class=\\\"ion-no-margin\\\">\\n                        <ion-grid>\\n                            <ion-row>\\n                                <ion-col size=\\\"2\\\" class=\\\"ion-float-left\\\">\\n                                    <ion-text color=\\\"light\\\">\\n                                        <ion-badge mode=\\\"ios\\\" class=\\\"list-header\\\" color=\\\"primary\\\">\\n                                            <ion-icon class=\\\"chip\\\" name=\\\"clipboard\\\"></ion-icon> {{ pay.odrId }}\\n                                        </ion-badge>\\n                                    </ion-text>\\n                                </ion-col>\\n                                <ion-col size=\\\"6\\\" class=\\\"ion-float-left\\\">\\n                                    <ion-text color=\\\"light\\\">\\n                                        <p class=\\\"list-sub-header ion-text-right\\\">\\n                                            Rs.{{ pay.amount }}\\n                                        </p>\\n                                    </ion-text>\\n                                </ion-col>\\n                                <ion-col size=\\\"2\\\" class=\\\"ion-float-right\\\">\\n                                    <ion-badge class=\\\"ion-float-right\\\" mode=\\\"ios\\\" *ngIf=\\\"pay.isOutstPay\\\" color=\\\"danger\\\">\\n                                        <ion-icon name=\\\"add\\\"></ion-icon>\\n                                    </ion-badge>\\n                                    <ion-badge class=\\\"ion-float-right\\\" mode=\\\"ios\\\" *ngIf=\\\"!pay.isOutstPay\\\" color=\\\"tertiary\\\">\\n                                        <ion-icon name=\\\"remove\\\"></ion-icon>\\n                                    </ion-badge>\\n                                </ion-col>\\n                            </ion-row>\\n                        </ion-grid>\\n                    </ion-label>\\n                </ion-item>\\n                <ion-item-options side=\\\"end\\\">\\n                    <ion-item-option color=\\\"danger\\\" class=\\\"ion-text-capitalize\\\" (click)=\\\"removeItem(idx, pay.amount)\\\">\\n                            <ion-icon name=\\\"close\\\"></ion-icon>Remove\\n                    </ion-item-option>\\n                </ion-item-options>\\n            </ion-item-sliding>\\n        </ion-list>\\n        <ion-grid>\\n            <ion-row>\\n                <ion-col size=\\\"12\\\">\\n                    <ion-button style=\\\"width: 100%;\\\" class=\\\"ion-float-right\\\" (click)=\\\"confirmSettles()\\\">\\n                        <ion-icon name=\\\"arrow-round-back\\\"></ion-icon>Confirm & Go Back\\n                    </ion-button>\\n                </ion-col>\\n            </ion-row>\\n        </ion-grid>\\n    </ion-card>\\n\\n    <ion-list style=\\\"margin-bottom: 40px;\\\">\\n        <ion-item background=\\\"dark\\\" *ngFor=\\\"let outst of outsts\\\" class=\\\"list-small-amrgin\\\" (click)=\\\"openOutstMore(outst)\\\">\\t\\t\\t\\n            <ion-label text-wrap class=\\\"ion-no-margin\\\">\\n                <ion-grid>\\n                    <ion-row>\\n                        <ion-col size=\\\"2\\\" class=\\\"ion-float-left\\\">\\n                            <ion-text color=\\\"light\\\">\\n                                <ion-badge mode=\\\"ios\\\" class=\\\"list-header\\\" color=\\\"primary\\\">\\n                                    <ion-icon class=\\\"chip\\\" name=\\\"clipboard\\\"></ion-icon> {{ outst.odr_id }}\\n                                </ion-badge>\\n                            </ion-text>\\n                        </ion-col>\\n                        <ion-col size=\\\"6\\\" class=\\\"ion-float-left\\\">\\n                            <ion-text color=\\\"light\\\">\\n                                <p class=\\\"list-sub-header\\\">\\n                                    <ion-icon name=\\\"calendar\\\"></ion-icon>\\n                                    {{ outst.odr_datetime }}\\n                                </p>\\n                            </ion-text>\\n                        </ion-col>\\n                        <ion-col size=\\\"2\\\" class=\\\"ion-float-right\\\">\\n                            <ion-badge class=\\\"ion-float-right\\\" mode=\\\"ios\\\" *ngIf=\\\"outst.isOutst\\\" color=\\\"danger\\\">\\n                                <ion-icon name=\\\"wallet\\\"></ion-icon>\\n                            </ion-badge>\\n                            <ion-badge class=\\\"ion-float-right\\\" mode=\\\"ios\\\" *ngIf=\\\"!outst.isOutst\\\" color=\\\"tertiary\\\">\\n                                <ion-icon name=\\\"wallet\\\"></ion-icon>\\n                            </ion-badge>\\n                        </ion-col>\\n                    </ion-row>\\n                    <ion-row>\\n                        <ion-col class=\\\"ion-float-left\\\"><b>Total</b></ion-col>\\n                        <ion-col class=\\\"ion-float-left\\\"><b>Paid Amount</b></ion-col>\\n                        <ion-col class=\\\"ion-float-left\\\"><b>Out/Exc</b></ion-col>\\n                    </ion-row>\\n                    <ion-row>\\n                        <ion-col class=\\\"ion-float-left\\\">{{ outst.odr_amount }}</ion-col>\\n                        <ion-col class=\\\"ion-float-left\\\">{{ outst.odr_paid_amount }}</ion-col>\\n                        <ion-col class=\\\"ion-float-left\\\">{{ outst.out }}</ion-col>\\n                    </ion-row>\\n                </ion-grid>\\n            </ion-label>\\n        </ion-item>\\n    </ion-list>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OutstSettlePage } from './outst-settle.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OutstSettlePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OutstSettlePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OutstSettlePageRoutingModule } from './outst-settle-routing.module';\n\nimport { OutstSettlePage } from './outst-settle.page';\nimport { OutstMorePageModule } from '../outst-more/outst-more.module'\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    OutstSettlePageRoutingModule,\n    OutstMorePageModule\n  ],\n  declarations: [OutstSettlePage]\n})\nexport class OutstSettlePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21lbWJlcnMvaW5jL291dHN0LXNldHRsZS9vdXRzdC1zZXR0bGUucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { NavParams } from '@ionic/angular';\nimport { ModalController } from '@ionic/angular';\nimport { OutstMorePage } from '../outst-more/outst-more.page';\nimport { OutstPayment } from '../../../services/storage.service';\nimport { AuthenticationService } from '../../../services/authentication.service';\n\n@Component({\n    selector: 'app-outst-settle',\n    templateUrl: './outst-settle.page.html',\n    styleUrls: ['./outst-settle.page.scss'],\n})\n\nexport class OutstSettlePage implements OnInit {\n    private outsts: any;\n    private totalPaid: number;\n    private isOutstAvail: boolean = false;\n    private ttlOutst: number = 0;\n    private oustPays: OutstPayment[] = [];\n    private effectivePaid: number = 0;\n    constructor(\n        public modalController: ModalController,\n        private navParams: NavParams,\n        private authService: AuthenticationService\n    ) { \n        this.outsts = navParams.get('outsts');\n        this.totalPaid = Number(navParams.get('totalPaid'));\n        this.ttlOutst = navParams.get('ttlOutst');\n        console.log(this.outsts)\n    }\n\n    ngOnInit() {\n        this.isOutstAvail = this.outsts.length > 0 ? true: false;\n        this.effectivePaid = this.totalPaid;\n        this.getTotalOutst();\n    }\n\n    removeItem(idx: number, amount: number){\n        this.oustPays.splice(idx, 1);\n        this.calcEffectivePaid(amount, true);\n    }\n\n    confirmSettles(){\n        if (this.oustPays.length < 1) {\n            this.authService.showToast(\"<b>Please add atleast one settlemnt record and proceed.. <ion-icon name='information-circle-outline'></ion-icon></b>\");\n        }else{\n            this.modalController.dismiss({\n                settlements: this.oustPays\n            });\n        }\n    }\n\n\n    getTotalOutst() {\n        let ttlOutst: number = 0;\n        this.outsts.forEach((outst: any, index) => {\n            console.log(index)\n            this.outsts[index].isOutst = Number(this.outsts[index].isOutst) == 1 ? true: false;  \n            ttlOutst += Number(outst.out);\n        });\n    }\n\n\n    async openOutstMore(out: any){\n        const modal = await this.modalController.create({\n            component: OutstMorePage,\n            componentProps: {\n                outst: out,\n                currPay: this.totalPaid,\n                effectivePaid: this.effectivePaid\n            }\n        });\n        modal.present();\n        let ret = await modal.onWillDismiss();\n        let pay: OutstPayment = <OutstPayment>ret.data.payment;\n        if (pay) {\n            if(this.oustPays.some(function(el){ return el.odrId === pay.odrId})){\n                this.authService.showToast(\"<b>The record already exists in the settlments list.. <ion-icon name='information-circle-outline'></ion-icon>\");\n            }else{\n                console.log(pay);\n                this.oustPays.push(pay);\n                this.calcEffectivePaid(pay.amount, false);\n            }\n        } \n    }\n\n    calcEffectivePaid(pay: number, isAdd: boolean){\n\n        if(isAdd) {\n            this.effectivePaid = this.effectivePaid*1 + pay*1;\n        }else {\n            this.effectivePaid = this.effectivePaid*1 - pay*1;\n        }\n    }\n    \n    dismiss() {\n        this.modalController.dismiss({\n            'dismissed': true,\n        });\n    }\n\n}\n"],"sourceRoot":"webpack:///"}